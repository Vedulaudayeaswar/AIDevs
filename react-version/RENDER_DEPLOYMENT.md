# ğŸš€ Deploying AIDevs to Render

This guide will help you deploy your full-stack AIDevs application to Render.

## ğŸ“‹ Prerequisites

1. **GitHub Account** - Your code needs to be in a GitHub repository
2. **Render Account** - Sign up at [render.com](https://render.com)
3. **Groq API Key** - Get from [console.groq.com](https://console.groq.com)

## ğŸ¯ Deployment Options

### Option 1: Blueprint Deployment (Recommended - Deploy Everything at Once)

1. **Push Code to GitHub**

   ```bash
   cd "c:\Users\padma\Desktop\AI Devs\react-version"
   git init
   git add .
   git commit -m "Initial commit - AIDevs full-stack app"
   git branch -M main
   git remote add origin https://github.com/YOUR_USERNAME/aidevs.git
   git push -u origin main
   ```

2. **Deploy to Render**

   - Go to [Render Dashboard](https://dashboard.render.com)
   - Click **"New"** â†’ **"Blueprint"**
   - Connect your GitHub repository
   - Render will automatically detect `render.yaml` and create all services

3. **Set Environment Variables**

   - Go to **aidevs-backend** service
   - Navigate to **Environment** tab
   - Add these variables:
     - `GROQ_API_KEY` - Your Groq API key
     - `ENCRYPTION_KEY` - Generate with: `python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"`
     - `JWT_SECRET_KEY` - Auto-generated by Render
     - `CORS_ORIGINS` - Your frontend URL (e.g., `https://aidevs-frontend.onrender.com`)

4. **Update Frontend API URL**
   - Go to **aidevs-frontend** service
   - Navigate to **Environment** tab
   - Set `REACT_APP_API_URL` to your backend URL (e.g., `https://aidevs-backend.onrender.com`)

### Option 2: Manual Deployment (Deploy Services Separately)

#### A. Deploy Backend

1. **Create Web Service**

   - Dashboard â†’ **New** â†’ **Web Service**
   - Connect your GitHub repo
   - Settings:
     - **Name**: `aidevs-backend`
     - **Region**: Oregon (or closest to you)
     - **Branch**: `main`
     - **Root Directory**: `react-version/backend`
     - **Runtime**: Python 3
     - **Build Command**: `pip install -r requirements.txt`
     - **Start Command**: `gunicorn -w 4 -k gevent --worker-connections 1000 --bind 0.0.0.0:$PORT app:app`

2. **Environment Variables**

   ```
   GROQ_API_KEY=your-groq-api-key
   ENCRYPTION_KEY=your-encryption-key
   JWT_SECRET_KEY=auto-generated
   FLASK_ENV=production
   ```

3. **Health Check**
   - Path: `/api/health`

#### B. Deploy Frontend

1. **Create Static Site**

   - Dashboard â†’ **New** â†’ **Static Site**
   - Connect your GitHub repo
   - Settings:
     - **Name**: `aidevs-frontend`
     - **Region**: Oregon
     - **Branch**: `main`
     - **Root Directory**: `react-version`
     - **Build Command**: `npm install && npm run build`
     - **Publish Directory**: `build`

2. **Environment Variables**

   ```
   REACT_APP_API_URL=https://your-backend-url.onrender.com
   ```

3. **Rewrites and Redirects**
   Add to handle React Router:
   ```
   Source: /*
   Destination: /index.html
   Type: Rewrite
   ```

## ğŸ”§ Post-Deployment Configuration

### 1. Update CORS in Backend

After frontend is deployed, update backend environment variable:

```
CORS_ORIGINS=https://your-frontend-url.onrender.com
```

Or update in code ([app.py](backend/app.py)):

```python
CORS(app, origins=[
    "https://your-frontend-url.onrender.com",
    "http://localhost:3000"  # For local development
])
```

### 2. Update Frontend API URL

Update all API calls in React components to use environment variable:

**Before:**

```javascript
fetch("http://localhost:5000/api/chat", ...)
```

**After:**

```javascript
const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';
fetch(`${API_URL}/api/chat`, ...)
```

### 3. Test the Deployment

1. Visit your frontend URL: `https://your-frontend-url.onrender.com`
2. Register a new account
3. Build a test website
4. Verify backend generation and download work

## ğŸ“Š Monitoring & Logs

- **View Logs**: Dashboard â†’ Select Service â†’ Logs tab
- **Health Check**: `https://your-backend-url.onrender.com/api/health`
- **Metrics**: Dashboard â†’ Select Service â†’ Metrics tab

## ğŸ’° Pricing (Free Tier)

Render offers free tier for:

- âœ… Web Services (with limitations)
- âœ… Static Sites
- âš ï¸ Note: Free services spin down after 15 minutes of inactivity
- âš ï¸ First request after spin-down may take 30-60 seconds

**Upgrade to Paid ($7/month per service) for:**

- Always-on instances
- Faster performance
- More resources

## ğŸ› Troubleshooting

### Backend Issues

**Error: Module not found**

```bash
# Check requirements.txt includes all dependencies
pip freeze > backend/requirements.txt
```

**Error: Port binding**

- Ensure start command uses `$PORT` variable
- Render automatically assigns port

**ChromaDB persistence issues**

- Free tier has no persistent disk
- Data will be lost on service restart
- Upgrade to paid tier for disk persistence

### Frontend Issues

**API calls failing**

- Check `REACT_APP_API_URL` is set correctly
- Verify CORS is configured in backend
- Check browser console for errors

**404 on refresh**

- Ensure rewrites are configured for React Router

**Build failures**

- Check Node version compatibility
- Clear cache: Dashboard â†’ Service â†’ Settings â†’ Clear Cache

## ğŸ” Security Best Practices

1. **Never commit `.env` files** - Use Render environment variables
2. **Rotate secrets regularly** - Update JWT_SECRET_KEY and ENCRYPTION_KEY
3. **Use HTTPS only** - Render provides SSL certificates automatically
4. **Set strong passwords** - For user accounts
5. **Monitor logs** - Check for suspicious activity

## ğŸ“š Additional Resources

- [Render Documentation](https://render.com/docs)
- [Flask Production Deployment](https://flask.palletsprojects.com/en/3.0.x/deploying/)
- [React Deployment Best Practices](https://create-react-app.dev/docs/deployment/)

## ğŸ†˜ Support

If you encounter issues:

1. Check Render logs first
2. Verify all environment variables are set
3. Test locally with production settings
4. Contact Render support: support@render.com

---

**Your AIDevs app should now be live! ğŸ‰**

Frontend: `https://aidevs-frontend.onrender.com`  
Backend: `https://aidevs-backend.onrender.com`
